<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MKA Uganda • Dashboard</title>
<!-- Classic Elegant Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@600;700&family=Libre+Franklin:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
:root {
--green: #00331A;
--deep-green: #001F12;
--gold: #B89B5E;
--cream: #FAF9F5;
--light-gold: #F5E6D3;
--border: #E8E2D9;
--danger: #e74c3c;
--success: #27ae60;
--warning: #f39c12;
--info: #3498db;
--ug-black: #000000;
--ug-yellow: #FFCD00;
--ug-red: #D90000;
}
* { margin:0; padding:0; box-sizing:border-box; }
body { font-family:'Libre Franklin',sans-serif; background:var(--cream); color:#2d2d2d; }
header {
position:fixed; top:0; left:0; right:0; height:90px;
background:white;
border-bottom:1px solid var(--border);
z-index:1000;
box-shadow:0 4px 20px rgba(0,0,0,0.04);
}
.header-container {
display: flex;
align-items: center;
justify-content: space-between;
padding: 0 2rem;
height: 100%;
}
/* Ugandan Flag Banner */
.flag-banner {
background: linear-gradient(to right, var(--ug-black) 33%, var(--ug-yellow) 33%, var(--ug-yellow) 66%, var(--ug-red) 66%);
height: 6px;
width: 100%;
position: absolute;
top: 0;
left: 0;
}
.logo-section {
display: flex;
align-items: center;
gap: 15px;
}
.logo {
font-family:'Cormorant Garamond',serif;
font-size:2.2rem;
color:var(--deep-green);
display: flex;
align-items: center;
gap: 10px;
}
.logo-icon {
font-size: 2.5rem;
color: var(--gold);
}
.logo small {
font-size:0.85rem;
display:block;
margin-top:-2px;
color:var(--gold);
letter-spacing:1.5px;
}
.search-section {
flex: 1;
max-width: 500px;
margin: 0 2rem;
}
.search-bar {
width: 100%;
padding: 12px 20px;
border: 1px solid var(--border);
border-radius: 30px;
background: white;
font-size: 0.95rem;
box-shadow: 0 2px 10px rgba(0,0,0,0.05);
transition: all 0.3s;
}
.search-bar:focus {
outline: none;
border-color: var(--gold);
box-shadow: 0 4px 15px rgba(184,155,94,0.2);
}
.search-bar::placeholder {
color: #999;
}
.user-section {
display: flex;
align-items: center;
gap: 20px;
}
.fax-btn {
background: linear-gradient(135deg, var(--ug-yellow), var(--ug-red));
color: white;
border: none;
padding: 10px 25px;
border-radius: 30px;
font-weight: 600;
cursor: pointer;
display: flex;
align-items: center;
gap: 10px;
transition: all 0.3s;
box-shadow: 0 4px 15px rgba(255, 205, 0, 0.3);
}
.fax-btn:hover {
transform: translateY(-2px);
box-shadow: 0 6px 20px rgba(255, 205, 0, 0.4);
}
.fax-btn i {
font-size: 1.2rem;
}
.user-profile {
display: flex;
align-items: center;
gap: 12px;
font-weight: 500;
cursor: pointer;
position: relative;
}
.user-avatar {
width: 50px;
height: 50px;
border-radius: 50%;
background: var(--gold);
display: flex;
align-items: center;
justify-content: center;
font-size: 1.5rem;
color: white;
font-weight: bold;
}
.user-info {
text-align: right;
}
.user-info strong {
color: var(--deep-green);
font-size: 1rem;
}
.user-info small {
color: var(--gold);
font-size: 0.8rem;
}
.user-dropdown {
position: absolute;
top: 65px;
right: 0;
background: white;
border-radius: 12px;
box-shadow: 0 10px 30px rgba(0,0,0,0.15);
padding: 15px 0;
min-width: 200px;
display: none;
z-index: 1001;
}
.user-profile:hover .user-dropdown {
display: block;
}
.dropdown-item {
padding: 10px 20px;
cursor: pointer;
transition: background 0.2s;
color: var(--deep-green);
}
.dropdown-item:hover {
background: var(--light-gold);
}
.sidebar {
position: fixed;
left: 0;
top: 90px;
bottom: 0;
width: 280px;
background: white;
border-right: 1px solid var(--border);
padding-top: 2rem;
box-shadow: 6px 0 20px rgba(0,0,0,0.03);
overflow-y: auto;
}
.sidebar h3 {
font-family: 'Cormorant Garamond', serif;
font-size: 1.8rem;
color: var(--deep-green);
text-align: center;
margin-bottom: 2rem;
}
.menu-item {
padding: 1.1rem 2rem;
display: flex;
align-items: center;
gap: 16px;
color: #444;
font-weight: 500;
cursor: pointer;
transition: 0.3s;
border-left: 3px solid transparent;
}
.menu-item:hover, .menu-item.active {
background: var(--light-gold);
color: var(--deep-green);
font-weight: 600;
border-left-color: var(--gold);
}
.main {
margin-left: 280px;
padding: 130px 50px 100px;
}
.dashboard-header {
text-align: center;
margin-bottom: 3rem;
}
.dashboard-header h1 {
font-family: 'Cormorant Garamond', serif;
font-size: 3rem;
color: var(--deep-green);
}
.dashboard-header p {
color: #666;
font-size: 1.1rem;
margin-top: 0.5rem;
}
/* Action Buttons */
.action-buttons {
display: flex;
gap: 12px;
margin-bottom: 25px;
flex-wrap: wrap;
justify-content: space-between;
align-items: center;
}
.btn {
padding: 10px 20px;
border: none;
border-radius: 6px;
font-weight: 600;
cursor: pointer;
display: flex;
align-items: center;
gap: 8px;
transition: all 0.3s ease;
font-size: 0.95rem;
}
.btn-add {
background: var(--success);
color: white;
}
.btn-add:hover {
background: #219653;
transform: translateY(-2px);
}
.btn-edit {
background: var(--gold);
color: var(--deep-green);
}
.btn-edit:hover {
background: #a58a55;
transform: translateY(-2px);
}
.btn-remove {
background: var(--danger);
color: white;
}
.btn-remove:hover {
background: #c0392b;
transform: translateY(-2px);
}
.btn-view {
background: var(--info);
color: white;
}
.btn-view:hover {
background: #2980b9;
transform: translateY(-2px);
}
/* Data Tables */
.data-section {
background: white;
border-radius: 16px;
padding: 25px;
box-shadow: 0 10px 35px rgba(0,0,0,0.06);
border: 1px solid var(--border);
margin-bottom: 30px;
}
.section-title {
font-family: 'Cormorant Garamond', serif;
color: var(--deep-green);
font-size: 1.8rem;
margin-bottom: 20px;
display: flex;
align-items: center;
gap: 12px;
}
table {
width: 100%;
border-collapse: collapse;
margin-top: 15px;
}
th, td {
padding: 14px 15px;
text-align: left;
border-bottom: 1px solid #eee;
}
th {
background-color: #f8fafc;
font-weight: 600;
color: var(--dark);
text-transform: uppercase;
font-size: 0.85rem;
letter-spacing: 0.5px;
}
tr {
cursor: pointer;
transition: background-color 0.2s;
}
tr:hover {
background-color: #f9fbfd;
}
tr.clickable-row:hover {
background-color: var(--light-gold);
}
.item-actions {
display: flex;
gap: 10px;
justify-content: flex-end;
}
.item-btn {
padding: 6px 12px;
border-radius: 4px;
font-size: 0.85rem;
cursor: pointer;
border: none;
}
/* Stats Cards */
.stats-grid {
display: grid;
grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
gap: 20px;
margin-bottom: 30px;
}
.stat-card {
background: white;
border-radius: 16px;
padding: 25px;
box-shadow: 0 10px 35px rgba(0,0,0,0.06);
border: 1px solid var(--border);
text-align: center;
transition: transform 0.3s;
}
.stat-card:hover {
transform: translateY(-5px);
}
.stat-card i {
font-size: 3rem;
color: var(--gold);
margin-bottom: 15px;
}
.stat-card .number {
font-family: 'Cormorant Garamond', serif;
font-size: 2.5rem;
font-weight: 700;
color: var(--deep-green);
margin: 10px 0;
}
.stat-card .label {
color: #666;
font-size: 0.95rem;
}
/* Charts Grid */
.charts-grid {
display: grid;
grid-template-columns: repeat(3, 1fr);
gap: 1.8rem;
max-width: 1600px;
margin: 0 auto;
}
@media (max-width: 1400px) { .charts-grid { grid-template-columns: repeat(2, 1fr); } }
@media (max-width: 900px)  { .charts-grid { grid-template-columns: 1fr; } }
.chart-card {
background: white;
border-radius: 16px;
padding: 1.8rem 1.5rem;
box-shadow: 0 10px 35px rgba(0,0,0,0.06);
border: 1px solid var(--border);
opacity: 0;
transform: translateY(30px);
animation: fadeUp 0.8s forwards;
}
.chart-card:nth-child(1) { animation-delay: 0.1s; }
.chart-card:nth-child(2) { animation-delay: 0.2s; }
.chart-card:nth-child(3) { animation-delay: 0.3s; }
.chart-card:nth-child(4) { animation-delay: 0.4s; }
.chart-card:nth-child(5) { animation-delay: 0.5s; }
.chart-card:nth-child(6) { animation-delay: 0.6s; }
.chart-card:nth-child(7) { animation-delay: 0.7s; }
.chart-card:nth-child(8) { animation-delay: 0.8s; }
@keyframes fadeUp { to { opacity: 1; transform: none; } }
.chart-card h3 {
font-family: 'Cormorant Garamond', serif;
font-size: 1.5rem;
color: var(--deep-green);
text-align: center;
margin-bottom: 1.2rem;
position: relative;
}
.chart-card h3::after {
content: '';
width: 50px;
height: 2px;
background: var(--gold);
position: absolute;
bottom: -8px;
left: 50%;
transform: translateX(-50%);
}
canvas { max-height: 220px !important; }
/* Modal Styles */
.modal {
display: none;
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
background: rgba(0,0,0,0.7);
z-index: 2000;
justify-content: center;
align-items: center;
}
.modal-content {
background: white;
border-radius: 16px;
width: 90%;
max-width: 600px;
box-shadow: 0 20px 50px rgba(0,0,0,0.3);
padding: 30px;
max-height: 90vh;
overflow-y: auto;
}
.modal-header {
display: flex;
justify-content: space-between;
align-items: center;
margin-bottom: 25px;
padding-bottom: 15px;
border-bottom: 1px solid var(--border);
}
.modal-title {
font-family: 'Cormorant Garamond', serif;
color: var(--deep-green);
font-size: 1.8rem;
}
.close-modal {
background: none;
border: none;
font-size: 1.8rem;
cursor: pointer;
color: #999;
}
.form-group {
margin-bottom: 20px;
}
label {
display: block;
margin-bottom: 8px;
font-weight: 500;
color: var(--deep-green);
}
input, select, textarea {
width: 100%;
padding: 12px 15px;
border: 1px solid #ddd;
border-radius: 8px;
font-size: 1rem;
transition: border-color 0.3s;
}
input:focus, select:focus, textarea:focus {
outline: none;
border-color: var(--gold);
}
.modal-footer {
display: flex;
justify-content: flex-end;
gap: 12px;
margin-top: 20px;
padding-top: 20px;
border-top: 1px solid var(--border);
}
.confirm-btn {
padding: 10px 25px;
border: none;
border-radius: 6px;
font-weight: 600;
cursor: pointer;
}
.confirm-yes {
background: var(--danger);
color: white;
}
.confirm-no {
background: #ddd;
color: #333;
}
/* Badge Styles */
.badge {
display: inline-block;
padding: 4px 12px;
border-radius: 20px;
font-size: 0.8rem;
font-weight: 600;
}
.badge-active { background: var(--success); color: white; }
.badge-pending { background: var(--warning); color: white; }
.badge-completed { background: var(--info); color: white; }
/* Toast Notification */
.toast {
position: fixed;
bottom: 20px;
right: 20px;
background: white;
border-left: 4px solid var(--success);
padding: 15px 25px;
border-radius: 8px;
box-shadow: 0 5px 20px rgba(0,0,0,0.2);
z-index: 3000;
display: none;
animation: slideIn 0.3s ease-out;
}
@keyframes slideIn {
from {
transform: translateX(400px);
opacity: 0;
}
to {
transform: translateX(0);
opacity: 1;
}
}
.toast.success { border-left-color: var(--success); }
.toast.error { border-left-color: var(--danger); }
.toast i { margin-right: 10px; }
</style>
</head>
<body>
<!-- HEADER WITH UGANDAN FLAG COLORS -->
<header>
<div class="flag-banner"></div>
<div class="header-container">
<div class="logo-section">
<div class="logo">
<i class="fas fa-mosque logo-icon"></i>
<small>MAJLIS KHUDDAMUL AHMADIYYA - UGANDA</small>
</div>
</div>
<div class="search-section">
<input type="text" class="search-bar" id="globalSearch" placeholder="Search members, departments, regions, mosques, events..." onkeyup="performSearch()">
</div>
<div class="user-section">
<button class="fax-btn" id="faxTab">
<i class="fas fa-fax"></i> Send Fax to Huzoor (aba)
</button>
<div class="user-profile" onclick="toggleUserMenu()">
<div class="user-avatar">
<i class="fas fa-user"></i>
</div>
<div class="user-info">
<strong>Sadr</strong>
<small>Head Of Khuddam</small>
</div>
<div class="user-dropdown">
<div class="dropdown-item" onclick="showPage('settings'); event.stopPropagation();">
<i class="fas fa-cog"></i> Settings
</div>
<div class="dropdown-item" onclick="showPage('profile'); event.stopPropagation();">
<i class="fas fa-user"></i> My Profile
</div>
<div class="dropdown-item" onclick="logout(); event.stopPropagation();">
<i class="fas fa-sign-out-alt"></i> Logout
</div>
</div>
</div>
</div>
</div>
</header>
<!-- SIDEBAR – ALL CLICKABLE -->
<div class="sidebar">
<h3>MKA Uganda</h3>
<div class="menu-item active" onclick="showPage('dashboard')">
<i class="fas fa-tachometer-alt"></i> Dashboard
</div>
<div class="menu-item" onclick="showPage('members')">
<i class="fas fa-users"></i> Khuddam
</div>
<div class="menu-item" onclick="showPage('departments')">
<i class="fas fa-building"></i> Departments
</div>
<div class="menu-item" onclick="showPage('regions')">
<i class="fas fa-sitemap"></i> Regions
</div>
<div class="menu-item" onclick="showPage('mosques')">
<i class="fas fa-mosque"></i> Mosques
</div>
<div class="menu-item" onclick="showPage('khuddam')">
<i class="fas fa-running"></i> Qaideens
</div>
<div class="menu-item" onclick="showPage('lajna')">
<i class="fas fa-female"></i> R. Courses
</div>
<div class="menu-item" onclick="showPage('atfal')">
<i class="fas fa-child"></i> Atfal
</div>
<div class="menu-item" onclick="showPage('jalsa')">
<i class="fas fa-calendar"></i> Ijtima
</div>
<div class="menu-item" onclick="showPage('reports')">
<i class="fas fa-chart-bar"></i> Reports
</div>
<div class="menu-item" onclick="showPage('settings')">
<i class="fas fa-cog"></i> Settings
</div>
</div>
<!-- MAIN CONTENT -->
<div class="main">
<!-- DASHBOARD PAGE -->
<div id="dashboard" class="page active">
<div class="dashboard-header">
<h1>MAJLIS KHUDDAMUL AHMADIYYA - UGANDA</h1>
<p>A Nation cannot be reformed without the reformation of its youth.”: <span id="currentDate"></span></p>
</div>
<!-- Quick Stats -->
<div class="stats-grid">
<div class="stat-card">
<i class="fas fa-users"></i>
<div class="number" id="totalMembersStat">0</div>
<div class="label">Total Members</div>
</div>
<div class="stat-card">
<i class="fas fa-building"></i>
<div class="number" id="totalDepartmentsStat">0</div>
<div class="label">Departments</div>
</div>
<div class="stat-card">
<i class="fas fa-sitemap"></i>
<div class="number" id="totalMajalisStat">0</div>
<div class="label">Active Majalis</div>
</div>
<div class="stat-card">
<i class="fas fa-mosque"></i>
<div class="number" id="totalMosquesStat">0</div>
<div class="label">Mosques Built</div>
</div>
</div>
<div class="charts-grid">
<!-- 1. Total Members -->
<div class="chart-card">
<h3>Total Members</h3>
<canvas id="totalMembers"></canvas>
</div>
<!-- 2. Active Majalis -->
<div class="chart-card">
<h3>Active Majalis</h3>
<canvas id="majalisChart"></canvas>
</div>
<!-- 3. Mosques -->
<div class="chart-card">
<h3>Mosques Built</h3>
<canvas id="mosquesChart"></canvas>
</div>
<!-- 4. Chanda Collection -->
<div class="chart-card">
<h3>Chanda Collection 2025</h3>
<canvas id="chandaChart"></canvas>
</div>
<!-- 5. Wasiyyat -->
<div class="chart-card">
<h3>Wasiyyat Progress</h3>
<canvas id="wasiyyatChart"></canvas>
</div>
<!-- 6. New Bai'ats This Year -->
<div class="chart-card">
<h3>New Bai'ats 2025</h3>
<canvas id="baiatChart"></canvas>
</div>
<!-- 7. Khuddam Strength -->
<div class="chart-card">
<h3>Khuddam-ul-Ahmadiyya</h3>
<canvas id="khuddamChart"></canvas>
</div>
<!-- 8. Lajna Strength -->
<div class="chart-card">
<h3>Lajna Imaillah</h3>
<canvas id="lajnaChart"></canvas>
</div>
</div>
</div>
<!-- MEMBERS PAGE -->
<div id="members" class="page" style="display:none;">
<div class="action-buttons">
<button class="btn btn-add" onclick="openAddModal('member')">
<i class="fas fa-plus"></i> Add New Member
</button>
<div>
<button class="btn btn-view" onclick="exportData('members')">
<i class="fas fa-download"></i> Export
</button>
</div>
</div>
<div class="data-section">
<h2 class="section-title"><i class="fas fa-users"></i> Members Database</h2>
<table id="membersTable">
<thead>
<tr>
<th>Name</th>
<th>ID</th>
<th>Region</th>
<th>Department</th>
<th>Status</th>
<th>Actions</th>
</tr>
</thead>
<tbody id="membersTableBody">
<!-- Populated by JavaScript -->
</tbody>
</table>
</div>
</div>
<!-- DEPARTMENTS PAGE -->
<div id="departments" class="page" style="display:none;">
<div class="action-buttons">
<button class="btn btn-add" onclick="openAddModal('department')">
<i class="fas fa-plus"></i> Add New Department
</button>
<div>
<button class="btn btn-view" onclick="exportData('departments')">
<i class="fas fa-download"></i> Export
</button>
</div>
</div>
<div class="data-section">
<h2 class="section-title"><i class="fas fa-building"></i> All Departments</h2>
<table id="departmentsTable">
<thead>
<tr>
<th>Department Name</th>
<th>Head</th>
<th>Members</th>
<th>Status</th>
<th>Actions</th>
</tr>
</thead>
<tbody id="departmentsTableBody">
<!-- Populated by JavaScript -->
</tbody>
</table>
</div>
</div>
<!-- REGIONS PAGE -->
<div id="regions" class="page" style="display:none;">
<div class="action-buttons">
<button class="btn btn-add" onclick="openAddModal('region')">
<i class="fas fa-plus"></i> Add New Region
</button>
<button class="btn btn-add" onclick="openAddModal('subregion')">
<i class="fas fa-plus"></i> Add Sub-Region
</button>
<div>
<button class="btn btn-view" onclick="exportData('regions')">
<i class="fas fa-download"></i> Export
</button>
</div>
</div>
<div class="data-section">
<h2 class="section-title"><i class="fas fa-sitemap"></i> Regions</h2>
<table id="regionsTable">
<thead>
<tr>
<th>Region</th>
<th>Majalis</th>
<th>Members</th>
<th>President</th>
<th>Actions</th>
</tr>
</thead>
<tbody id="regionsTableBody">
<!-- Populated by JavaScript -->
</tbody>
</table>
</div>
</div>
<!-- MOSQUES PAGE -->
<div id="mosques" class="page" style="display:none;">
<div class="action-buttons">
<button class="btn btn-add" onclick="openAddModal('mosque')">
<i class="fas fa-plus"></i> Add New Mosque
</button>
<div>
<button class="btn btn-view" onclick="exportData('mosques')">
<i class="fas fa-download"></i> Export
</button>
</div>
</div>
<div class="data-section">
<h2 class="section-title"><i class="fas fa-mosque"></i> Mosques of Uganda</h2>
<table id="mosquesTable">
<thead>
<tr>
<th>Name</th>
<th>Location</th>
<th>Region</th>
<th>Capacity</th>
<th>Status</th>
<th>Actions</th>
</tr>
</thead>
<tbody id="mosquesTableBody">
<!-- Populated by JavaScript -->
</tbody>
</table>
</div>
</div>
<!-- KHUDDAM PAGE -->
<div id="khuddam" class="page" style="display:none;">
<div class="action-buttons">
<button class="btn btn-add" onclick="openAddModal('khuddam')">
<i class="fas fa-plus"></i> Add Khuddam Member
</button>
<div>
<button class="btn btn-view" onclick="exportData('khuddam')">
<i class="fas fa-download"></i> Export
</button>
</div>
</div>
<div class="data-section">
<h2 class="section-title"><i class="fas fa-running"></i> Khuddam-ul-Ahmadiyya</h2>
<table id="khuddamTable">
<thead>
<tr>
<th>Name</th>
<th>Unit</th>
<th>Position</th>
<th>Age</th>
<th>Actions</th>
</tr>
</thead>
<tbody id="khuddamTableBody">
<!-- Populated by JavaScript -->
</tbody>
</table>
</div>
</div>
<!-- LAJNA PAGE -->
<div id="lajna" class="page" style="display:none;">
<div class="action-buttons">
<button class="btn btn-add" onclick="openAddModal('lajna')">
<i class="fas fa-plus"></i> Add Lajna Member
</button>
<div>
<button class="btn btn-view" onclick="exportData('lajna')">
<i class="fas fa-download"></i> Export
</button>
</div>
</div>
<div class="data-section">
<h2 class="section-title"><i class="fas fa-female"></i> Lajna Imaillah</h2>
<table id="lajnaTable">
<thead>
<tr>
<th>Name</th>
<th>Unit</th>
<th>Position</th>
<th>Age</th>
<th>Actions</th>
</tr>
</thead>
<tbody id="lajnaTableBody">
<!-- Populated by JavaScript -->
</tbody>
</table>
</div>
</div>
<!-- ATFAL PAGE -->
<div id="atfal" class="page" style="display:none;">
<div class="action-buttons">
<button class="btn btn-add" onclick="openAddModal('atfal')">
<i class="fas fa-plus"></i> Add Atfal Member
</button>
<div>
<button class="btn btn-view" onclick="exportData('atfal')">
<i class="fas fa-download"></i> Export
</button>
</div>
</div>
<div class="data-section">
<h2 class="section-title"><i class="fas fa-child"></i> Atfal-ul-Ahmadiyya</h2>
<table id="atfalTable">
<thead>
<tr>
<th>Name</th>
<th>Unit</th>
<th>Age Group</th>
<th>Age</th>
<th>Actions</th>
</tr>
</thead>
<tbody id="atfalTableBody">
<!-- Populated by JavaScript -->
</tbody>
</table>
</div>
</div>
<!-- JALSA PAGE -->
<div id="jalsa" class="page" style="display:none;">
<div class="action-buttons">
<button class="btn btn-add" onclick="openAddModal('jalsa')">
<i class="fas fa-plus"></i> Add Jalsa Event
</button>
<div>
<button class="btn btn-view" onclick="exportData('jalsa')">
<i class="fas fa-download"></i> Export
</button>
</div>
</div>
<div class="data-section">
<h2 class="section-title"><i class="fas fa-calendar"></i> Jalsa Salana Events</h2>
<table id="jalsaTable">
<thead>
<tr>
<th>Event</th>
<th>Date</th>
<th>Location</th>
<th>Attendees</th>
<th>Actions</th>
</tr>
</thead>
<tbody id="jalsaTableBody">
<!-- Populated by JavaScript -->
</tbody>
</table>
</div>
</div>
<!-- REPORTS PAGE -->
<div id="reports" class="page" style="display:none;">
<div class="data-section">
<h2 class="section-title"><i class="fas fa-chart-bar"></i> Reports</h2>
<div style="text-align: center; padding: 40px; color: #999;">
<h3 style="font-family: 'Cormorant Garamond', serif; color: var(--deep-green); margin-bottom: 20px;">
<i class="fas fa-info-circle"></i> Comprehensive Reports</h3>
<p style="font-size: 1.1rem; margin-bottom: 30px;">Select a report type from the options below to generate detailed analytics.</p>
<div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; max-width: 800px; margin: 0 auto;">
<button class="btn btn-view" style="padding: 15px;" onclick="generateReport('members')">
<i class="fas fa-users"></i> Members Report
</button>
<button class="btn btn-view" style="padding: 15px;" onclick="generateReport('departments')">
<i class="fas fa-building"></i> Departments Report
</button>
<button class="btn btn-view" style="padding: 15px;" onclick="generateReport('financial')">
<i class="fas fa-money-bill-wave"></i> Financial Report
</button>
</div>
</div>
</div>
</div>
<!-- SETTINGS PAGE -->
<div id="settings" class="page" style="display:none;">
<div class="data-section">
<h2 class="section-title"><i class="fas fa-cog"></i> System Settings</h2>
<div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 30px;">
<!-- General Settings -->
<div>
<h3 style="font-family: 'Cormorant Garamond', serif; color: var(--deep-green); margin-bottom: 20px;">
<i class="fas fa-sliders-h"></i> General Settings
</h3>
<div class="form-group">
<label for="orgName">Organization Name</label>
<input type="text" id="orgName" value="Ahmadiyya Muslim Jamā'at Uganda">
</div>
<div class="form-group">
<label for="timezone">Timezone</label>
<select id="timezone">
<option>Africa/Kampala</option>
<option>UTC</option>
<option>GMT</option>
</select>
</div>
<div class="form-group">
<label for="language">Default Language</label>
<select id="language">
<option>English</option>
<option>Arabic</option>
<option>Urdu</option>
<option>Swahili</option>
</select>
</div>
<div class="form-group">
<label for="dateFormat">Date Format</label>
<select id="dateFormat">
<option>DD/MM/YYYY</option>
<option>MM/DD/YYYY</option>
<option>YYYY-MM-DD</option>
</select>
</div>
</div>
<!-- Notification Settings -->
<div>
<h3 style="font-family: 'Cormorant Garamond', serif; color: var(--deep-green); margin-bottom: 20px;">
<i class="fas fa-bell"></i> Notification Settings
</h3>
<div style="display: flex; align-items: center; gap: 10px; margin-bottom: 15px;">
<input type="checkbox" id="emailNotify" style="width: auto;" checked>
<label for="emailNotify" style="font-weight: 500; margin: 0;">Email Notifications</label>
</div>
<div style="display: flex; align-items: center; gap: 10px; margin-bottom: 15px;">
<input type="checkbox" id="smsNotify" style="width: auto;" checked>
<label for="smsNotify" style="font-weight: 500; margin: 0;">SMS Notifications</label>
</div>
<div style="display: flex; align-items: center; gap: 10px; margin-bottom: 15px;">
<input type="checkbox" id="reportReminders" style="width: auto;" checked>
<label for="reportReminders" style="font-weight: 500; margin: 0;">Monthly Report Reminders</label>
</div>
<div style="display: flex; align-items: center; gap: 10px; margin-bottom: 15px;">
<input type="checkbox" id="jalsaReminders" style="width: auto;" checked>
<label for="jalsaReminders" style="font-weight: 500; margin: 0;">Jalsa Reminders</label>
</div>
</div>
</div>
<div style="margin-top: 30px; text-align: right;">
<button class="btn btn-edit" style="padding: 12px 30px;" onclick="saveSettings()">
<i class="fas fa-save"></i> Save Settings
</button>
</div>
</div>
</div>
</div>
<!-- FAX MODAL -->
<div id="faxModal" class="modal">
<div class="modal-content">
<div class="modal-header">
<h3 class="modal-title">Send Fax to Huzoor (aba)</h3>
<button class="close-modal" onclick="closeFaxModal()">&times;</button>
</div>
<form id="faxForm">
<div class="form-group">
<p style="margin-bottom:1.5rem;"><strong>Date:</strong> <span id="faxDate"></span></p>
</div>
<div class="form-group">
<label for="faxType">Fax Type</label>
<select id="faxType" style="width:100%;padding:1rem;border-radius:12px;border:1px solid #ddd;">
<option>Monthly Report – Uganda Jamā'at</option>
<option>Request for Dua</option>
<option>Jalsa Salana Report</option>
<option>Bai'at Report</option>
<option>Other</option>
</select>
</div>
<div class="form-group">
<label for="faxMessage">Message</label>
<textarea id="faxMessage" rows="8" style="width:100%;padding:1.2rem;border-radius:12px;border:1px solid #ddd;resize:vertical;" placeholder="Enter your message with utmost love and respect..."></textarea>
</div>
<div class="modal-footer">
<button type="button" class="confirm-btn confirm-no" onclick="closeFaxModal()">Cancel</button>
<button type="submit" class="confirm-btn" style="background: var(--gold); color: var(--deep-green);">
<i class="fas fa-paper-plane"></i> Send to Huzoor (aba)
</button>
</div>
</form>
</div>
</div>
<!-- ADD/EDIT MODAL -->
<div id="crudModal" class="modal">
<div class="modal-content">
<div class="modal-header">
<h3 class="modal-title" id="modalTitle">Add New Item</h3>
<button class="close-modal" onclick="closeModal()">&times;</button>
</div>
<form id="crudForm">
<div class="form-group">
<label for="itemName">Name / Title <span style="color: var(--danger);">*</span></label>
<input type="text" id="itemName" required>
</div>
<div class="form-group">
<label for="itemDetails">Details / Description</label>
<textarea id="itemDetails" rows="3"></textarea>
</div>
<div class="form-group">
<label for="itemRegion">Region (if applicable)</label>
<select id="itemRegion">
<option value="">Select Region</option>
<option value="Central">Central</option>
<option value="Eastern">Eastern</option>
<option value="Western">Western</option>
<option value="Northern">Northern</option>
</select>
</div>
<div class="form-group">
<label for="itemStatus">Status</label>
<select id="itemStatus">
<option value="active">Active</option>
<option value="pending">Pending</option>
<option value="inactive">Inactive</option>
</select>
</div>
<div class="modal-footer">
<button type="button" class="confirm-btn confirm-no" onclick="closeModal()">Cancel</button>
<button type="submit" class="confirm-btn" style="background: var(--success); color: white;">
<i class="fas fa-save"></i> Save
</button>
</div>
</form>
</div>
</div>
<!-- DELETE CONFIRMATION MODAL -->
<div id="deleteModal" class="modal">
<div class="modal-content">
<div class="modal-header">
<h3 class="modal-title">Confirm Deletion</h3>
<button class="close-modal" onclick="closeDeleteModal()">&times;</button>
</div>
<p style="margin: 20px 0;">Are you sure you want to remove <strong id="deleteItemName">this item</strong>? This action cannot be undone.</p>
<div style="background: #fff8f8; padding: 15px; border-left: 4px solid var(--danger); margin-bottom: 20px;">
<i class="fas fa-exclamation-triangle" style="color: var(--danger); margin-right: 10px;"></i>
<strong>Warning:</strong> This will permanently delete all associated data.
</div>
<div class="modal-footer">
<button class="confirm-btn confirm-no" onclick="closeDeleteModal()">Cancel</button>
<button class="confirm-btn confirm-yes" onclick="confirmDelete()">Yes, Remove</button>
</div>
</div>
</div>
<!-- TOAST NOTIFICATION -->
<div id="toast" class="toast">
<i class="fas fa-check-circle"></i>
<span id="toastMessage">Operation successful!</span>
</div>
<script>
// ==================== DATA STORAGE ====================
let database = {
members: [],
departments: [],
regions: [],
mosques: [],
khuddam: [],
lajna: [],
atfal: [],
jalsa: []
};
// Load data from localStorage
function loadData() {
const savedData = localStorage.getItem('acmsUgandaData');
if (savedData) {
database = JSON.parse(savedData);
} else {
// Initialize with sample data
initializeSampleData();
}
updateStats();
loadPageData('members');
loadPageData('departments');
loadPageData('regions');
loadPageData('mosques');
}
// Save data to localStorage
function saveData() {
localStorage.setItem('acmsUgandaData', JSON.stringify(database));
updateStats();
}
// Initialize sample data
function initializeSampleData() {
database.members = [
{ id: 'UG-1001', name: 'Muhammad Ali', region: 'Central', department: 'Education', status: 'active', age: 32, joined: '2015' },
{ id: 'UG-1002', name: 'Aisha Khan', region: 'Eastern', department: 'Health', status: 'active', age: 28, joined: '2018' },
{ id: 'UG-1003', name: 'Yusuf Ahmed', region: 'Western', department: 'Finance', status: 'active', age: 45, joined: '2010' },
{ id: 'UG-1004', name: 'Fatima Zohra', region: 'Northern', department: 'Publications', status: 'active', age: 35, joined: '2012' },
{ id: 'UG-1005', name: 'Omar Hassan', region: 'Central', department: 'Khuddam', status: 'active', age: 22, joined: '2020' }
];
database.departments = [
{ id: 'dept-001', name: 'Umoomi', head: 'Muhammad Iqbal', members: 15, status: 'active' },
{ id: 'dept-002', name: 'Umoomi', head: 'Abdul Rahman', members: 23, status: 'active' },
{ id: 'dept-003', name: 'Health Services', head: 'Dr. Amina Yusuf', members: 18, status: 'active' },
{ id: 'dept-004', name: 'Publications & Media', head: 'Zaid Khan', members: 12, status: 'active' }
];
database.regions = [
{ id: 'reg-001', name: 'Central Region', majalis: 42, members: 18500, president: 'Hafiz Ahmad' },
{ id: 'reg-002', name: 'Eastern Region', majalis: 28, members: 12300, president: 'Muhammad Saleem' },
{ id: 'reg-003', name: 'Western Region', majalis: 35, members: 15800, president: 'Abdul Malik' },
{ id: 'reg-004', name: 'Northern Region', majalis: 37, members: 16400, president: 'Yusuf Khan' }
];
database.mosques = [
{ id: 'mosq-001', name: 'Baitul Futuh Mosque', location: 'Kampala', region: 'Central', capacity: 1200, status: 'completed' },
{ id: 'mosq-002', name: 'Masjid-e-Mehdi', location: 'Entebbe', region: 'Central', capacity: 800, status: 'completed' },
{ id: 'mosq-003', name: 'Baitul Huda Mosque', location: 'Jinja', region: 'Eastern', capacity: 600, status: 'completed' }
];
database.khuddam = [
{ id: 'kh-001', name: 'Yusuf Ahmed', unit: 'Kampala Unit', position: 'Secretary', age: 22 },
{ id: 'kh-002', name: 'Omar Hassan', unit: 'Entebbe Unit', position: 'Member', age: 19 }
];
database.lajna = [
{ id: 'lj-001', name: 'Fatima Zohra', unit: 'Kampala Unit', position: 'President', age: 35 },
{ id: 'lj-002', name: 'Amina Yusuf', unit: 'Entebbe Unit', position: 'Secretary', age: 28 }
];
database.atfal = [
{ id: 'at-001', name: 'Ali Hassan', unit: 'Kampala Unit', ageGroup: '7-10 Years', age: 9 },
{ id: 'at-002', name: 'Zaid Khan', unit: 'Entebbe Unit', ageGroup: '11-15 Years', age: 13 }
];
database.jalsa = [
{ id: 'js-001', event: 'Jalsa Salana 2025', date: 'Dec 2025', location: 'Kampala', attendees: 'Expected: 15,000' },
{ id: 'js-002', event: 'Jalsa Salana 2024', date: 'Dec 2024', location: 'Kampala', attendees: '12,500' }
];
saveData();
}
// ==================== PAGE SWITCHING ====================
let currentEntityType = '';
let currentItemName = '';
let currentPage = 'dashboard';
let currentItemId = null;
function showPage(id) {
currentPage = id;
document.querySelectorAll('.page').forEach(p => p.style.display = 'none');
document.getElementById(id).style.display = 'block';
document.querySelectorAll('.menu-item').forEach(m => m.classList.remove('active'));
const activeMenuItem = document.querySelector(`.menu-item[onclick="showPage('${id}')"]`);
if (activeMenuItem) activeMenuItem.classList.add('active');
loadPageData(id);
}
function loadPageData(page) {
switch(page) {
case 'members':
loadMembersTable();
break;
case 'departments':
loadDepartmentsTable();
break;
case 'regions':
loadRegionsTable();
break;
case 'mosques':
loadMosquesTable();
break;
case 'khuddam':
loadKhuddamTable();
break;
case 'lajna':
loadLajnaTable();
break;
case 'atfal':
loadAtfalTable();
break;
case 'jalsa':
loadJalsaTable();
break;
}
}
// ==================== TABLE LOADERS ====================
function loadMembersTable() {
const tbody = document.getElementById('membersTableBody');
tbody.innerHTML = '';
database.members.forEach(member => {
const row = document.createElement('tr');
row.className = 'clickable-row';
row.innerHTML = `
<td>${member.name}</td>
<td>${member.id}</td>
<td>${member.region}</td>
<td>${member.department}</td>
<td><span class="badge badge-active">Active</span></td>
<td class="item-actions">
<button class="item-btn btn-edit" onclick="openEditModal('member', '${member.id}')">
<i class="fas fa-edit"></i> Edit
</button>
<button class="item-btn btn-remove" onclick="openDeleteConfirm('member', '${member.id}', '${member.name}')">
<i class="fas fa-trash"></i> Remove
</button>
</td>
`;
tbody.appendChild(row);
});
}
function loadDepartmentsTable() {
const tbody = document.getElementById('departmentsTableBody');
tbody.innerHTML = '';
database.departments.forEach(dept => {
const row = document.createElement('tr');
row.className = 'clickable-row';
row.innerHTML = `
<td>${dept.name}</td>
<td>${dept.head}</td>
<td>${dept.members}</td>
<td><span class="badge badge-active">Active</span></td>
<td class="item-actions">
<button class="item-btn btn-view" onclick="enterDepartment('${dept.id}', '${dept.name.replace(/'/g, "\\'")}')">
<i class="fas fa-door-open"></i> Enter
</button>
<button class="item-btn btn-edit" onclick="manageDepartment('${dept.id}', '${dept.name.replace(/'/g, "\\'")}')">
<i class="fas fa-cog"></i> Manage
</button>
</td>
`;
tbody.appendChild(row);
});
}
function loadRegionsTable() {
const tbody = document.getElementById('regionsTableBody');
tbody.innerHTML = '';
database.regions.forEach(region => {
const row = document.createElement('tr');
row.className = 'clickable-row';
row.innerHTML = `
<td>${region.name}</td>
<td>${region.majalis}</td>
<td>${region.members.toLocaleString()}</td>
<td>${region.president}</td>
<td class="item-actions">
<button class="item-btn btn-edit" onclick="openEditModal('region', '${region.id}')">
<i class="fas fa-edit"></i> Edit
</button>
<button class="item-btn btn-remove" onclick="openDeleteConfirm('region', '${region.id}', '${region.name}')">
<i class="fas fa-trash"></i> Remove
</button>
</td>
`;
tbody.appendChild(row);
});
}
function loadMosquesTable() {
const tbody = document.getElementById('mosquesTableBody');
tbody.innerHTML = '';
database.mosques.forEach(mosque => {
const row = document.createElement('tr');
row.className = 'clickable-row';
row.innerHTML = `
<td>${mosque.name}</td>
<td>${mosque.location}</td>
<td>${mosque.region}</td>
<td>${mosque.capacity}</td>
<td><span class="badge badge-completed">Completed</span></td>
<td class="item-actions">
<button class="item-btn btn-edit" onclick="openEditModal('mosque', '${mosque.id}')">
<i class="fas fa-edit"></i> Edit
</button>
<button class="item-btn btn-remove" onclick="openDeleteConfirm('mosque', '${mosque.id}', '${mosque.name}')">
<i class="fas fa-trash"></i> Remove
</button>
</td>
`;
tbody.appendChild(row);
});
}
function loadKhuddamTable() {
const tbody = document.getElementById('khuddamTableBody');
tbody.innerHTML = '';
database.khuddam.forEach(member => {
const row = document.createElement('tr');
row.className = 'clickable-row';
row.innerHTML = `
<td>${member.name}</td>
<td>${member.unit}</td>
<td>${member.position}</td>
<td>${member.age}</td>
<td class="item-actions">
<button class="item-btn btn-edit" onclick="openEditModal('khuddam', '${member.id}')">
<i class="fas fa-edit"></i> Edit
</button>
<button class="item-btn btn-remove" onclick="openDeleteConfirm('khuddam', '${member.id}', '${member.name}')">
<i class="fas fa-trash"></i> Remove
</button>
</td>
`;
tbody.appendChild(row);
});
}
function loadLajnaTable() {
const tbody = document.getElementById('lajnaTableBody');
tbody.innerHTML = '';
database.lajna.forEach(member => {
const row = document.createElement('tr');
row.className = 'clickable-row';
row.innerHTML = `
<td>${member.name}</td>
<td>${member.unit}</td>
<td>${member.position}</td>
<td>${member.age}</td>
<td class="item-actions">
<button class="item-btn btn-edit" onclick="openEditModal('lajna', '${member.id}')">
<i class="fas fa-edit"></i> Edit
</button>
<button class="item-btn btn-remove" onclick="openDeleteConfirm('lajna', '${member.id}', '${member.name}')">
<i class="fas fa-trash"></i> Remove
</button>
</td>
`;
tbody.appendChild(row);
});
}
function loadAtfalTable() {
const tbody = document.getElementById('atfalTableBody');
tbody.innerHTML = '';
database.atfal.forEach(member => {
const row = document.createElement('tr');
row.className = 'clickable-row';
row.innerHTML = `
<td>${member.name}</td>
<td>${member.unit}</td>
<td>${member.ageGroup}</td>
<td>${member.age}</td>
<td class="item-actions">
<button class="item-btn btn-edit" onclick="openEditModal('atfal', '${member.id}')">
<i class="fas fa-edit"></i> Edit
</button>
<button class="item-btn btn-remove" onclick="openDeleteConfirm('atfal', '${member.id}', '${member.name}')">
<i class="fas fa-trash"></i> Remove
</button>
</td>
`;
tbody.appendChild(row);
});
}
function loadJalsaTable() {
const tbody = document.getElementById('jalsaTableBody');
tbody.innerHTML = '';
database.jalsa.forEach(event => {
const row = document.createElement('tr');
row.className = 'clickable-row';
row.innerHTML = `
<td>${event.event}</td>
<td>${event.date}</td>
<td>${event.location}</td>
<td>${event.attendees}</td>
<td class="item-actions">
<button class="item-btn btn-edit" onclick="openEditModal('jalsa', '${event.id}')">
<i class="fas fa-edit"></i> Edit
</button>
<button class="item-btn btn-remove" onclick="openDeleteConfirm('jalsa', '${event.id}', '${event.event}')">
<i class="fas fa-trash"></i> Remove
</button>
</td>
`;
tbody.appendChild(row);
});
}
// ==================== CRUD OPERATIONS ====================
function openAddModal(entityType) {
currentEntityType = entityType;
currentItemId = null;
document.getElementById('modalTitle').textContent = `Add New ${getEntityLabel(entityType)}`;
document.getElementById('itemName').value = '';
document.getElementById('itemDetails').value = '';
document.getElementById('itemRegion').value = '';
document.getElementById('itemStatus').value = 'active';
document.getElementById('crudModal').style.display = 'flex';
}
function openEditModal(entityType, itemId) {
currentEntityType = entityType;
currentItemId = itemId;
const item = findItemById(entityType, itemId);
if (item) {
document.getElementById('modalTitle').textContent = `Edit ${getEntityLabel(entityType)}`;
document.getElementById('itemName').value = item.name || item.event;
document.getElementById('itemDetails').value = item.details || '';
document.getElementById('itemRegion').value = item.region || '';
document.getElementById('itemStatus').value = item.status || 'active';
document.getElementById('crudModal').style.display = 'flex';
}
}
function findItemById(entityType, id) {
switch(entityType) {
case 'member': return database.members.find(m => m.id === id);
case 'department': return database.departments.find(d => d.id === id);
case 'region': return database.regions.find(r => r.id === id);
case 'mosque': return database.mosques.find(m => m.id === id);
case 'khuddam': return database.khuddam.find(k => k.id === id);
case 'lajna': return database.lajna.find(l => l.id === id);
case 'atfal': return database.atfal.find(a => a.id === id);
case 'jalsa': return database.jalsa.find(j => j.id === id);
}
return null;
}
function closeModal() {
document.getElementById('crudModal').style.display = 'none';
}
function getEntityLabel(type) {
const labels = {
'member': 'Member',
'region': 'Region',
'mosque': 'Mosque',
'khuddam': 'Khuddam Member',
'lajna': 'Lajna Member',
'atfal': 'Atfal Member',
'jalsa': 'Jalsa Event',
'department': 'Department'
};
return labels[type] || 'Item';
}
document.getElementById('crudForm').onsubmit = function(e) {
e.preventDefault();
const name = document.getElementById('itemName').value;
const details = document.getElementById('itemDetails').value;
const region = document.getElementById('itemRegion').value;
const status = document.getElementById('itemStatus').value;
const newItem = {
id: generateId(currentEntityType),
name: name,
details: details,
region: region,
status: status
};
if (currentItemId) {
// Update existing item
updateItem(currentEntityType, currentItemId, newItem);
showToast('Item updated successfully!', 'success');
} else {
// Add new item
addItem(currentEntityType, newItem);
showToast('Item added successfully!', 'success');
}
closeModal();
loadPageData(currentPage);
saveData();
}
function generateId(entityType) {
const prefix = {
'member': 'UG-',
'department': 'dept-',
'region': 'reg-',
'mosque': 'mosq-',
'khuddam': 'kh-',
'lajna': 'lj-',
'atfal': 'at-',
'jalsa': 'js-'
}[entityType] || 'item-';
const count = {
'member': database.members.length,
'department': database.departments.length,
'region': database.regions.length,
'mosque': database.mosques.length,
'khuddam': database.khuddam.length,
'lajna': database.lajna.length,
'atfal': database.atfal.length,
'jalsa': database.jalsa.length
}[entityType] || 0;
return `${prefix}${String(count + 1001).padStart(4, '0')}`;
}
function addItem(entityType, item) {
switch(entityType) {
case 'member': database.members.push(item); break;
case 'department': database.departments.push(item); break;
case 'region': database.regions.push(item); break;
case 'mosque': database.mosques.push(item); break;
case 'khuddam': database.khuddam.push(item); break;
case 'lajna': database.lajna.push(item); break;
case 'atfal': database.atfal.push(item); break;
case 'jalsa': database.jalsa.push(item); break;
}
}
function updateItem(entityType, id, updatedItem) {
switch(entityType) {
case 'member':
const memberIndex = database.members.findIndex(m => m.id === id);
if (memberIndex !== -1) database.members[memberIndex] = {...database.members[memberIndex], ...updatedItem};
break;
case 'department':
const deptIndex = database.departments.findIndex(d => d.id === id);
if (deptIndex !== -1) database.departments[deptIndex] = {...database.departments[deptIndex], ...updatedItem};
break;
case 'region':
const regIndex = database.regions.findIndex(r => r.id === id);
if (regIndex !== -1) database.regions[regIndex] = {...database.regions[regIndex], ...updatedItem};
break;
case 'mosque':
const mosqIndex = database.mosques.findIndex(m => m.id === id);
if (mosqIndex !== -1) database.mosques[mosqIndex] = {...database.mosques[mosqIndex], ...updatedItem};
break;
case 'khuddam':
const khIndex = database.khuddam.findIndex(k => k.id === id);
if (khIndex !== -1) database.khuddam[khIndex] = {...database.khuddam[khIndex], ...updatedItem};
break;
case 'lajna':
const ljIndex = database.lajna.findIndex(l => l.id === id);
if (ljIndex !== -1) database.lajna[ljIndex] = {...database.lajna[ljIndex], ...updatedItem};
break;
case 'atfal':
const atIndex = database.atfal.findIndex(a => a.id === id);
if (atIndex !== -1) database.atfal[atIndex] = {...database.atfal[atIndex], ...updatedItem};
break;
case 'jalsa':
const jsIndex = database.jalsa.findIndex(j => j.id === id);
if (jsIndex !== -1) database.jalsa[jsIndex] = {...database.jalsa[jsIndex], ...updatedItem};
break;
}
}
function openDeleteConfirm(entityType, itemId, itemName) {
currentEntityType = entityType;
currentItemId = itemId;
currentItemName = itemName;
document.getElementById('deleteItemName').textContent = `${getEntityLabel(entityType)} "${itemName}"`;
document.getElementById('deleteModal').style.display = 'flex';
}
function closeDeleteModal() {
document.getElementById('deleteModal').style.display = 'none';
}
function confirmDelete() {
deleteItem(currentEntityType, currentItemId);
showToast(`"${currentItemName}" removed successfully!`, 'success');
closeDeleteModal();
loadPageData(currentPage);
saveData();
}
function deleteItem(entityType, id) {
switch(entityType) {
case 'member': database.members = database.members.filter(m => m.id !== id); break;
case 'department': database.departments = database.departments.filter(d => d.id !== id); break;
case 'region': database.regions = database.regions.filter(r => r.id !== id); break;
case 'mosque': database.mosques = database.mosques.filter(m => m.id !== id); break;
case 'khuddam': database.khuddam = database.khuddam.filter(k => k.id !== id); break;
case 'lajna': database.lajna = database.lajna.filter(l => l.id !== id); break;
case 'atfal': database.atfal = database.atfal.filter(a => a.id !== id); break;
case 'jalsa': database.jalsa = database.jalsa.filter(j => j.id !== id); break;
}
}
// ==================== SEARCH FUNCTIONALITY ====================
function performSearch() {
const searchTerm = document.getElementById('globalSearch').value.toLowerCase().trim();
if (searchTerm.length < 2) return;
const results = [];
// Search members
database.members.forEach(member => {
if (member.name.toLowerCase().includes(searchTerm) ||
member.region.toLowerCase().includes(searchTerm) ||
member.department.toLowerCase().includes(searchTerm)) {
results.push({
type: 'Member',
title: member.name,
subtitle: `${member.department} - ${member.region}`,
action: () => showPage('members')
});
}
});
// Search departments
database.departments.forEach(dept => {
if (dept.name.toLowerCase().includes(searchTerm) ||
dept.head.toLowerCase().includes(searchTerm)) {
results.push({
type: 'Department',
title: dept.name,
subtitle: `Head: ${dept.head}`,
action: () => showPage('departments')
});
}
});
// Search regions
database.regions.forEach(region => {
if (region.name.toLowerCase().includes(searchTerm) ||
region.president.toLowerCase().includes(searchTerm)) {
results.push({
type: 'Region',
title: region.name,
subtitle: `President: ${region.president}`,
action: () => showPage('regions')
});
}
});
// Search mosques
database.mosques.forEach(mosque => {
if (mosque.name.toLowerCase().includes(searchTerm) ||
mosque.location.toLowerCase().includes(searchTerm) ||
mosque.region.toLowerCase().includes(searchTerm)) {
results.push({
type: 'Mosque',
title: mosque.name,
subtitle: `${mosque.location} - ${mosque.region}`,
action: () => showPage('mosques')
});
}
});
// Show results in toast
if (results.length > 0) {
showToast(`Found ${results.length} result(s) for "${searchTerm}"`, 'success');
} else {
showToast(`No results found for "${searchTerm}"`, 'error');
}
}
// ==================== MODAL FUNCTIONS ====================
function closeFaxModal() {
document.getElementById('faxModal').style.display = 'none';
}
document.getElementById('faxTab').onclick = () => {
document.getElementById('faxDate').textContent = new Date().toLocaleDateString('en-GB', { day:'numeric', month:'long', year:'numeric' });
document.getElementById('faxModal').style.display = 'flex';
};
document.getElementById('faxForm').onsubmit = function(e) {
e.preventDefault();
showToast("Fax successfully sent to Beloved Huzoor (aba) in London Markaz. May Allah grant you His nearness. Amin ❤️", 'success');
document.getElementById('faxModal').style.display = 'none';
document.getElementById('faxMessage').value = '';
}
function toggleUserMenu() {
const dropdown = document.querySelector('.user-dropdown');
dropdown.style.display = dropdown.style.display === 'block' ? 'none' : 'block';
}
function logout() {
showToast('Logged out successfully!', 'success');
setTimeout(() => {
window.location.reload();
}, 1000);
}
// Close modals when clicking outside
window.onclick = function(event) {
if (event.target === document.getElementById('crudModal')) closeModal();
if (event.target === document.getElementById('deleteModal')) closeDeleteModal();
if (event.target === document.getElementById('faxModal')) closeFaxModal();
if (!event.target.closest('.user-profile')) {
document.querySelector('.user-dropdown').style.display = 'none';
}
};
// ==================== DEPARTMENT NAVIGATION ====================
// Navigate to department index.html within the same tab
function enterDepartment(deptId, deptName) {
// Extract first letter of each word and convert to lowercase
const prefix = deptName.split(' ')
    .map(word => word.charAt(0))
    .join('')
    .toLowerCase();
const url = `${prefix}-index.html`;
showToast(`Entering ${deptName}...`, 'success');
// Navigate within the same tab
window.location.href = url;
}

// Navigate to department admin.html within the same tab
function manageDepartment(deptId, deptName) {
// Extract first letter of each word and convert to lowercase
const prefix = deptName.split(' ')
    .map(word => word.charAt(0))
    .join('')
    .toLowerCase();
const url = `${prefix}-admin.html`;
showToast(`Managing ${deptName}...`, 'success');
// Navigate within the same tab
window.location.href = url;
}
// ==================== TOAST NOTIFICATION ====================
function showToast(message, type = 'success') {
const toast = document.getElementById('toast');
const toastMessage = document.getElementById('toastMessage');
toastMessage.textContent = message;
toast.className = `toast ${type}`;
toast.style.display = 'block';
setTimeout(() => {
toast.style.display = 'none';
}, 3000);
}
// ==================== SETTINGS ====================
function saveSettings() {
const settings = {
orgName: document.getElementById('orgName').value,
timezone: document.getElementById('timezone').value,
language: document.getElementById('language').value,
dateFormat: document.getElementById('dateFormat').value,
emailNotify: document.getElementById('emailNotify').checked,
smsNotify: document.getElementById('smsNotify').checked,
reportReminders: document.getElementById('reportReminders').checked,
jalsaReminders: document.getElementById('jalsaReminders').checked
};
localStorage.setItem('acmsSettings', JSON.stringify(settings));
showToast('Settings saved successfully!', 'success');
}
// ==================== REPORTS ====================
function generateReport(type) {
showToast(`Generating ${type} report... This will create a comprehensive PDF with all relevant data.`, 'success');
}
function exportData(type) {
showToast(`Exporting ${type} data to Excel/CSV format...`, 'success');
}
// ==================== STATS UPDATE ====================
function updateStats() {
document.getElementById('totalMembersStat').textContent = database.members.length;
document.getElementById('totalDepartmentsStat').textContent = database.departments.length;
document.getElementById('totalMajalisStat').textContent = database.regions.reduce((sum, r) => sum + r.majalis, 0);
document.getElementById('totalMosquesStat').textContent = database.mosques.length;
}
// ==================== INITIALIZE CHARTS ====================
function initCharts() {
// 1. Total Members
new Chart(document.getElementById('totalMembers'), {
type: 'doughnut',
data: {
datasets: [{
data: [48731, 51269],
backgroundColor: ['#B89B5E', '#eee'],
label: 'Members'
}]
},
options: {
cutout: '80%',
plugins: {
legend: { display: false },
tooltip: { enabled: false }
}
}
});
// 2. Active Majalis
new Chart(document.getElementById('majalisChart'), {
type: 'doughnut',
data: {
datasets: [{
data: [142, 158],
backgroundColor: ['#00331A', '#eee']
}]
},
options: {
cutout: '80%',
plugins: {
legend: false,
tooltip: false
}
}
});
// 3. Mosques
new Chart(document.getElementById('mosquesChart'), {
type: 'doughnut',
data: {
datasets: [{
data: [87, 13],
backgroundColor: ['#B89B5E', '#eee']
}]
},
options: {
cutout: '80%',
plugins: {
legend: false,
tooltip: false
}
}
});
// 4. Chanda 2025
new Chart(document.getElementById('chandaChart'), {
type: 'doughnut',
data: {
labels: ['Collected','Pending'],
datasets: [{
data: [96.3, 3.7],
backgroundColor: ['#00331A','#ddd']
}]
},
options: {
cutout: '75%'
}
});
// 5. Wasiyyat
new Chart(document.getElementById('wasiyyatChart'), {
type: 'doughnut',
data: {
datasets: [{
data: [71, 29],
backgroundColor: ['#B89B5E','#eee']
}]
},
options: {
cutout: '78%'
}
});
// 6. New Bai'ats 2025
new Chart(document.getElementById('baiatChart'), {
type: 'bar',
data: {
labels: ['Jan','Feb','Mar','Apr'],
datasets: [{
data: [78,92,115,138],
backgroundColor: '#00331A'
}]
},
options: {
plugins: {
legend: { display: false }
},
scales: {
y: {
beginAtZero: true,
ticks: {
stepSize: 50
}
}
}
}
});
// 7. Khuddam
new Chart(document.getElementById('khuddamChart'), {
type: 'bar',
data: {
labels: ['Active','Total'],
datasets: [{
data: [14280, 14820],
backgroundColor: ['#00331A','#B89B5E']
}]
},
options: {
plugins: {
legend: { display: false }
},
scales: {
y: {
beginAtZero: true
}
}
}
});
// 8. Lajna
new Chart(document.getElementById('lajnaChart'), {
type: 'bar',
data: {
labels: ['Active','Total'],
datasets: [{
data: [14850, 15200],
backgroundColor: ['#B89B5E','#00331A']
}]
},
options: {
plugins: {
legend: { display: false }
},
scales: {
y: {
beginAtZero: true
}
}
}
});
}
// ==================== PAGE INITIALIZATION ====================
window.onload = function() {
// Set current date
document.getElementById('currentDate').textContent = new Date().toLocaleDateString('en-GB', {
day: 'numeric',
month: 'long',
year: 'numeric'
});
// Load data
loadData();
// Initialize charts
initCharts();
// Show dashboard by default
showPage('dashboard');
};
</script>
</body>
</html>